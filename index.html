<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografía: El Futuro de tu Enfoque Legal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Color personalizado para turquesa */
        .text-turquoise {
            color: #4fd1c5;
        }
        .bg-turquoise {
            background-color: #4fd1c5;
        }
        .border-turquoise {
            border-color: #4fd1c5;
        }
        /* Estilo para el loader */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4fd1c5;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .step-container {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.5s forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">

    <div class="bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden">
        
        <!-- SECCIÓN 1: ENCABEZADO SUPERIOR -->
        <header class="text-center p-8 sm:p-12">
            <h1 class="text-turquoise font-black text-4xl sm:text-5xl lg:text-6xl tracking-tight">
                Menos Carga Administrativa. Más Apoyo Legal.
            </h1>
            <p class="mt-4 text-lg sm:text-xl text-gray-800 max-w-2xl mx-auto">
                Deja de administrar el caos. Dedica tu talento a lo que solo tú puedes hacer: ganar.
            </p>
        </header>

        <!-- SECCIÓN 2: EL DESAFÍO -->
        <section class="px-8 sm:px-12 py-12 bg-white">
            <h2 class="text-center text-3xl font-bold text-gray-900 mb-12">
                La Sobrecarga Diaria que Frena tu Potencial
            </h2>
            <div class="grid md:grid-cols-3 gap-10 text-center">
                <div class="flex flex-col items-center">
                    <i data-lucide="inbox" class="text-turquoise w-16 h-16 mb-4"></i>
                    <h3 class="font-bold text-lg text-gray-900 mb-2">Avalancha de Comunicaciones</h3>
                    <p class="text-gray-600">Decenas de correos sin clasificar exigen tu atención inmediata.</p>
                </div>
                <div class="flex flex-col items-center">
                    <i data-lucide="phone-call" class="text-turquoise w-16 h-16 mb-4"></i>
                    <h3 class="font-bold text-lg text-gray-900 mb-2">Interrupciones Constantes</h3>
                    <p class="text-gray-600">El flujo de trabajo se rompe para responder la misma pregunta una y otra vez.</p>
                </div>
                <div class="flex flex-col items-center">
                    <i data-lucide="target" class="text-turquoise w-16 h-16 mb-4"></i>
                    <h3 class="font-bold text-lg text-gray-900 mb-2">Foco Diluido</h3>
                    <p class="text-gray-600">La energía mental se dispersa en tareas operativas, restando claridad.</p>
                </div>
            </div>
        </section>

        <!-- SECCIÓN 3: LA SOLUCIÓN -->
        <section class="bg-turquoise text-white p-8 sm:p-12 text-center">
            <h2 class="text-4xl font-black mb-10">
                Implementa el Poder del Triage Legal
            </h2>
            <div class="grid lg:grid-cols-2 gap-8 max-w-3xl mx-auto">
                <div class="bg-white text-gray-800 rounded-xl p-8 shadow-lg flex flex-col items-center">
                    <i data-lucide="filter" class="text-turquoise w-16 h-16 mb-4"></i>
                    <h3 class="font-bold text-xl mb-3">Triage Automático</h3>
                    <p class="text-gray-600">Nuestro agente inteligente actúa como tu primer filtro, analiza, clasifica y enriquece cada comunicación.</p>
                </div>
                <div class="bg-white text-gray-800 rounded-xl p-8 shadow-lg flex flex-col items-center">
                    <i data-lucide="shield-heart" class="text-turquoise w-16 h-16 mb-4"></i>
                    <h3 class="font-bold text-xl mb-3">Comunicación Proactiva</h3>
                    <p class="text-gray-600">Ofréceles a tus clientes la certeza que buscan con un sistema que recopila información clave de forma autónoma.</p>
                </div>
            </div>
        </section>
        
        <!-- SECCIÓN 3.5: DEMO CON GEMINI API -->
        <section id="gemini-demo" class="px-8 sm:px-12 py-16 bg-gray-50">
            <h2 class="text-center text-3xl font-bold text-gray-900 mb-4">Prueba el Flujo de Trabajo Autónomo ✨</h2>
            <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">Pega una comunicación inicial y observa cómo la IA gestiona el caso hasta dejarlo listo para el abogado.</p>
            <div class="max-w-2xl mx-auto">
                <textarea id="inputText" class="w-full h-40 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-turquoise transition" placeholder="Ej: 'Hola, me despidieron y creo que fue injustificado. Llevaba 5 años en la empresa y mi finiquito parece muy bajo. ¿Qué puedo hacer?'"></textarea>
                <button id="analyzeButton" class="mt-4 w-full bg-turquoise hover:bg-teal-500 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-turquoise">
                    Iniciar Simulación de IA
                </button>
                <div id="loader" class="hidden mx-auto mt-8 loader"></div>
                <div id="result" class="hidden mt-8 space-y-6"></div>
                <div id="error" class="hidden mt-8 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg" role="alert"></div>
            </div>
        </section>

        <!-- SECCIÓN 4: EL IMPACTO -->
        <section class="px-8 sm:px-12 py-16 bg-white">
            <h2 class="text-center text-3xl font-bold text-gray-900 mb-12">
                El Resultado: Máximo Rendimiento, Mínima Fricción
            </h2>
            <div class="max-w-3xl mx-auto space-y-10">
                <div class="flex items-start space-x-6">
                    <div class="bg-turquoise/10 p-3 rounded-full"><i data-lucide="brain-circuit" class="text-turquoise w-8 h-8"></i></div>
                    <div>
                        <h3 class="font-bold text-lg text-gray-900">CLARIDAD ESTRATÉGICA</h3>
                        <p class="text-gray-600 mt-1">Enfoca el 100% de tu capacidad intelectual en la estrategia del caso, no en la logística.</p>
                    </div>
                </div>
                <div class="flex items-start space-x-6">
                    <div class="bg-turquoise/10 p-3 rounded-full"><i data-lucide="clock" class="text-turquoise w-8 h-8"></i></div>
                    <div>
                        <h3 class="font-bold text-lg text-gray-900">RECUPERACIÓN DE HORAS DE ALTO VALOR</h3>
                        <p class="text-gray-600 mt-1">Transforma horas administrativas en tiempo facturable o dedicado al crecimiento del estudio.</p>
                    </div>
                </div>
                <div class="flex items-start space-x-6">
                    <div class="bg-turquoise/10 p-3 rounded-full"><i data-lucide="magnet" class="text-turquoise w-8 h-8"></i></div>
                    <div>
                        <h3 class="font-bold text-lg text-gray-900">LEALTAD Y REFERENCIAS</h3>
                        <p class="text-gray-600 mt-1">Construye una experiencia de cliente tan excepcional que se convierte en tu mejor marketing.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECCIÓN 5: PIE DE PÁGINA -->
        <footer class="bg-gray-100 p-8">
            <div class="flex justify-center items-center max-w-4xl mx-auto">
                <div class="text-center">
                    <p class="font-bold text-lg text-gray-900">Lidera la transformación de tu estudio.</p>
                    <p class="text-gray-600">Contáctanos para saber más.</p>
                    <p class="font-bold text-turquoise mt-1">Growth Buddies</p>
                                        
                    <!-- INFORMACIÓN AÑADIDA -->
                    <div class="mt-6 border-t border-gray-200 pt-6 text-sm text-gray-700">
                        <p class="font-bold">Edmundo Spohr - Gerente Digital Outsourced</p>
                        <div class="mt-2 flex justify-center items-center space-x-4">
                             <a href="mailto:edmundo@spohr.cl" class="hover:text-turquoise flex items-center">
                                <i data-lucide="mail" class="w-4 h-4 mr-2"></i>
                                <span>edmundo@spohr.cl</span>
                             </a>
                             <span class="text-gray-300">|</span>
                             <a href="https://wa.me/56965863160" target="_blank" class="hover:text-turquoise flex items-center">
                                <i data-lucide="message-circle" class="w-4 h-4 mr-2"></i>
                                <span>WhatsApp</span>
                             </a>
                        </div>
                    </div>
                    <!-- FIN DE LA INFORMACIÓN AÑADIDA -->

                </div>
            </div>
        </footer>
    </div>

    <script>
        lucide.createIcons();

        const analyzeButton = document.getElementById('analyzeButton');
        const inputText = document.getElementById('inputText');
        const resultDiv = document.getElementById('result');
        const loader = document.getElementById('loader');
        const errorDiv = document.getElementById('error');

        analyzeButton.addEventListener('click', async () => {
            const userInput = inputText.value;
            if (!userInput.trim()) {
                showError('Por favor, introduce un texto para analizar.');
                return;
            }

            loader.classList.remove('hidden');
            resultDiv.innerHTML = '';
            resultDiv.classList.add('hidden');
            errorDiv.classList.add('hidden');
            analyzeButton.disabled = true;

            try {
                // --- PASO 1: ANÁLISIS INICIAL Y GENERACIÓN DE PREGUNTAS ---
                const initialPrompt = `Actúa como un asistente legal experto en triage para un estudio de abogados en Chile. Analiza la siguiente comunicación inicial de un cliente. Tu objetivo es generar un email automático para el cliente con 2 a 3 preguntas clave para obtener la información faltante más crítica. La respuesta debe ser un objeto JSON con las claves: "email_subject" (un asunto breve y profesional para el email) y "email_body" (el texto completo del email). El email debe ser cordial, profesional y explicar que estas preguntas ayudarán a agilizar su caso. La comunicación es: "${userInput}"`;
                
                const initialAnalysis = await callGemini(initialPrompt, {
                    type: "OBJECT",
                    properties: { 
                        "email_subject": { "type": "STRING" },
                        "email_body": { "type": "STRING" } 
                    },
                    required: ["email_subject", "email_body"]
                });

                displayStep1(userInput, initialAnalysis.email_subject, initialAnalysis.email_body);
                await new Promise(res => setTimeout(res, 500)); // Pequeña pausa para efecto visual

                // --- PASO 2: SIMULACIÓN DE RESPUESTAS Y GENERACIÓN DE INFORME FINAL ---
                const finalPrompt = `Actúa como un asistente legal experto para un estudio de abogados en Chile. Has recibido una comunicación inicial de un cliente y has enviado un email con preguntas aclaratorias. Ahora, SIMULA respuestas realistas y concisas del cliente a esas preguntas. Basado en la conversación COMPLETA (comunicación inicial + respuestas simuladas), genera un informe ejecutivo final para el abogado. La respuesta debe ser un objeto JSON con las siguientes claves:
                - "respuestas_simuladas": Un string que contenga las respuestas simuladas del cliente, formateadas como un texto de email de respuesta.
                - "informe_final": Un informe ejecutivo para el abogado. Formatea la respuesta para que sea fácil de leer, usando saltos de línea para separar las secciones. Incluye los siguientes títulos en mayúsculas seguidos de dos puntos: RESUMEN DEL CASO, INFORMACIÓN CLAVE OBTENIDA, EVALUACIÓN DE URGENCIA y PRÓXIMOS PASOS RECOMENDADOS.
                
                CONVERSACIÓN HASTA AHORA:
                Cliente (Inicial): "${userInput}"
                Asistente (Email Enviado - Asunto: ${initialAnalysis.email_subject}): "${initialAnalysis.email_body}"
                Cliente (Respuestas Simuladas): [SIMULA LAS RESPUESTAS AQUÍ]`;

                const finalReport = await callGemini(finalPrompt, {
                    type: "OBJECT",
                    properties: {
                        "respuestas_simuladas": { "type": "STRING" },
                        "informe_final": { "type": "STRING" }
                    },
                    required: ["respuestas_simuladas", "informe_final"]
                });
                
                displayStep2(finalReport);

            } catch (error) {
                console.error('Error en la simulación de IA:', error);
                showError('Hubo un problema durante la simulación. Por favor, inténtalo de nuevo.');
            } finally {
                loader.classList.add('hidden');
                analyzeButton.disabled = false;
            }
        });

        async function callGemini(prompt, schema, retries = 3, delay = 1000) {
            const payload = {
                contents: [{ role: "user", parts: [{ text: prompt }] }],
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: schema
                }
            };
            const apiKey = "AIzaSyDHs_dpJXr6au8SqSiYRNih5AEvpKOTQ5w";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const result = await response.json();
                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                        return JSON.parse(result.candidates[0].content.parts[0].text);
                    } else {
                        throw new Error('Respuesta inesperada de la API.');
                    }
                } catch (error) {
                    if (i === retries - 1) throw error;
                    await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
                }
            }
        }

        function displayStep1(initialQuery, emailSubject, emailBody) {
            resultDiv.classList.remove('hidden');
            const step1HTML = `
                <div class="step-container bg-white p-6 rounded-lg border border-gray-200 shadow-md">
                    <h3 class="font-bold text-xl text-gray-900 mb-4 flex items-center"><i data-lucide="mail-question" class="w-6 h-6 mr-3 text-turquoise"></i>Paso 1: Contacto Automático con Cliente</h3>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <p class="font-semibold">Consulta Inicial Recibida:</p>
                        <p class="text-gray-700 italic mt-2">"${initialQuery}"</p>
                    </div>
                    <div class="mt-4 bg-blue-50 p-4 rounded-lg border-l-4 border-blue-400">
                        <p class="font-semibold text-gray-800">Simulación de Email Enviado:</p>
                        <div class="mt-2 text-gray-700">
                            <p><strong class="font-medium">Asunto:</strong> ${emailSubject}</p>
                            <hr class="my-2 border-gray-200">
                            <div class="whitespace-pre-wrap">${emailBody}</div>
                        </div>
                    </div>
                </div>
            `;
            resultDiv.innerHTML += step1HTML;
            lucide.createIcons();
        }

        function displayStep2(data) {
            const step2HTML = `
                <div class="step-container bg-white p-6 rounded-lg border border-gray-200 shadow-md">
                    <h3 class="font-bold text-xl text-gray-900 mb-4 flex items-center"><i data-lucide="file-check-2" class="w-6 h-6 mr-3 text-turquoise"></i>Paso 2: Informe Ejecutivo Final</h3>
                    <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-400">
                        <p class="font-semibold text-gray-800">Simulación de Respuestas Recibidas:</p>
                        <div class="mt-2 text-gray-700 whitespace-pre-wrap bg-white p-3 rounded">${data.respuestas_simuladas}</div>
                    </div>
                    <div class="mt-6 bg-turquoise/10 p-4 rounded-lg border-l-4 border-turquoise">
                        <p class="font-semibold text-gray-800">Informe Final para Abogado:</p>
                        <p class="text-gray-700 mt-2 whitespace-pre-wrap">${data.informe_final}</p>
                    </div>
                </div>
            `;
            resultDiv.innerHTML += step2HTML;
            lucide.createIcons();
        }

        function showError(message) {
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }
    </script>
</body>
</html>
